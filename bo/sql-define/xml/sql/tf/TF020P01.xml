<?xml version="1.0" encoding="utf-8"?>
<sql-included>
	<sql-list>
		/** 経費振替申請 件数チェック **/
		<sql id="TF020P01-01">
			<statement type="final" name="final">
				<parts>
					SELECT
						COUNT(*) AS CNT
					FROM
				</parts></statement><statement type="replace" name="TABLE_ID1" /><statement type="final" name="final"><parts>
					WHERE 0=0
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE1" />
		</sql>
		/** 経費振替申請（申請、確定） 件数チェック **/
		<sql id="TF020P01-02">
			<statement type="final" name="final">
				<parts>
					SELECT
						SUM(CNT) AS CNT
					FROM
						(
							SELECT
								COUNT(*) AS CNT
							FROM
				</parts></statement><statement type="replace" name="TABLE_ID1" /><statement type="final" name="final"><parts>
							WHERE 0=0
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE1" />
			<statement type="final" name="final">
				<parts>
						UNION ALL
							SELECT
								COUNT(*) AS CNT
							FROM
				</parts></statement><statement type="replace" name="TABLE_ID2" /><statement type="final" name="final"><parts>
							WHERE 0=0
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE2" />
			<statement type="final" name="final">
				<parts>
						)
				</parts>
			</statement>
		</sql>
		/** 経費振替申請一覧 検索(申請テーブル) **/
		<sql id="TF020P01-03">
			<statement type="final" name="final">
				<parts>
					SELECT
						  T1.APPLY_YMD								AS APPLY_YMD		/*	申請日 */
						, 0											AS KAKUTEI_YMD		/*	確定日 */
						, T1.DENPYO_BANGO							AS DENPYO_BANGO		/*	伝票番号 */
						, T1.KAMOKU_CD								AS KAMOKU_CD		/*	科目コード */
						, M2.KAMOKU_NM								AS KAMOKU_NM		/*	科目名 */
						, ( 
							SELECT
								SUM(T1_1.SURYO)
							FROM
								MDAT0021 T1_1
							WHERE
								T1.DENPYO_BANGO = T1_1.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_1.SYORI_YMD 
								AND T1.TENPO_CD = T1_1.TENPO_CD
						)											AS SUURYO 			/*	数量 */
						, ( 
							SELECT
								SUM(T1_2.SURYO * NVL(M1_1.HYOKA_TNK, 0)) 
							FROM
								MDAT0021 T1_2
								INNER JOIN MDMT0130 M1_1
									ON T1_2.JAN_CD = M1_1.JAN_CD 
							WHERE
								T1.DENPYO_BANGO = T1_2.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_2.SYORI_YMD 
								AND T1.TENPO_CD = T1_2.TENPO_CD
						)											AS MONEY			/*	原価金額 */
						, ( 
							SELECT
								SUM(T1_3.SURYO * T1_3.BAIKA_TNK) 
							FROM
								MDAT0021 T1_3
							WHERE
								T1.DENPYO_BANGO = T1_3.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_3.SYORI_YMD 
								AND T1.TENPO_CD = T1_3.TENPO_CD
						)											AS BAIKAMONEY		/*	売価金額 */
						, M1.HANBAIIN_NM							AS HANBAIIN_NM		/*	申請担当者名 */
						, ( 
							SELECT
								M1_2.MEISYO_NM 
							FROM
								MDMT0100 M1_2
							WHERE
								M1_2.SIKIBETSU_CD = 'KHSN'
								AND M1_2.MEISYO_CD = 3
						)											AS SYONINSTATUS		/*	承認種別名 */
						, T1.SINSEIRIYU								AS SINSEIRIYU		/*	申請理由 */
						, ''										AS KYAKKARIYU		/*	却下理由 */
						, T1.SINSEITAN_CD							AS SINSEITAN_CD		/*	申請担当者コード */
						, T1.SINSEIRIYU_KB							AS SINSEIRIYU_KB	/*	申請理由区分コード */
						, T1.SYORI_YMD								AS SYORI_YMD		/*	処理日 */
						, T1.ADD_YMD								AS ADD_YMD			/*	登録日 */
						, T1.ADD_TM 								AS ADD_TM			/*	登録時間 */
						, T1.ADDTAN_CD								AS ADDTAN_CD		/*	登録担当者コード */
						, T1.UPD_YMD								AS UPD_YMD			/*	更新日 */
						, T1.UPD_TM 								AS UPD_TM			/*	更新時間 */
						, T1.UPD_TANCD								AS UPD_TANCD		/*	更新担当者コード */
						, ''										AS KAKUTEITANTOCD	/*	確定担当者コード */
						, ''										AS KAKUTEITANTONM	/*	確定担当者名 */
						, 0											AS SYONINSTATUSKBN	/*	承認状態 */
						, T1.SYORI_TM								AS SYORI_TM			/*	処理時間 */
						, T1.JYURI_NO								AS JYURI_NO			/*	受理番号 */
						, T1.GYOMURINGI_NO							AS GYOMURINGI_NO	/*	業務稟議No */
						, M3.MEISYO_NM								AS MEISYO_NM		/*	申請理由区分名 */
						, 1											AS TBLFLG 			/*	テーブル区分 */
						, 0											AS SOSINZUMI_FLG	/*	送信済みフラグ */
					FROM
				</parts></statement><statement type="replace" name="TABLE_ID1" /><statement type="final" name="final"><parts>
						LEFT JOIN
								BOMT0030 M1		/*	担当者マスタ */
						ON		M1.HANBAIIN_CD = T1.SINSEITAN_CD
						LEFT JOIN
								MDMT0040 M2		/*	科目マスタ */
						ON		M2.KAMOKU_CD = T1.KAMOKU_CD
						LEFT JOIN
								MDMT0100 M3		/*	名称マスタ */
						ON		M3.SIKIBETSU_CD = 'KHRY'
						AND		M3.MEISYO_CD = T1.SINSEIRIYU_KB
					WHERE 0=0 
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE1" />
			<statement type="replace" name="ADD_ORDER1" />
		</sql>
		/** 経費振替申請一覧 検索(確定テーブル) **/
		<sql id="TF020P01-04">
			<statement type="final" name="final">
				<parts>
					SELECT
						  T1.APPLY_YMD								AS APPLY_YMD 			/*	申請日 */
						, T1.UPD_YMD								AS KAKUTEI_YMD 			/*	確定日 */
						, T1.DENPYO_BANGO 							AS DENPYO_BANGO 		/*	伝票番号 */
						, T1.KAMOKU_CD								AS KAMOKU_CD 			/*	科目コード */
						, M2.KAMOKU_NM								AS KAMOKU_NM 			/*	科目名 */
						, ( 
							SELECT
								  SUM(T1_1.SURYO) 
							FROM
								MDAT0031 T1_1
							WHERE
								T1.DENPYO_BANGO = T1_1.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_1.SYORI_YMD 
								AND T1.TENPO_CD = T1_1.TENPO_CD
						)											AS SUURYO				/*	数量 */
						, ( 
							SELECT
								  SUM(T1_2.SURYO * T1_2.GEN_TNK) 
							FROM
								MDAT0031 T1_2
							WHERE
								T1.DENPYO_BANGO = T1_2.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_2.SYORI_YMD 
								AND T1.TENPO_CD = T1_2.TENPO_CD
						)											AS MONEY				/*	原価金額 */
						, ( 
							SELECT
								  SUM(T1_3.SURYO * T1_3.BAIKA_TNK) 
							FROM
								MDAT0031 T1_3
							WHERE
								T1.DENPYO_BANGO = T1_3.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_3.SYORI_YMD 
								AND T1.TENPO_CD = T1_3.TENPO_CD
						)											AS BAIKAMONEY			/*	売価金額 */
						, M1.HANBAIIN_NM							AS HANBAIIN_NM			/*	申請担当者名 */
						, M3.MEISYO_NM								AS SYONINSTATUS			/*	承認種別名 */
						, T1.SINSEIRIYU								AS SINSEIRIYU			/*	申請理由 */
						, T1.KYAKKARIYU								AS KYAKKARIYU			/*	却下理由 */
						, T1.SINSEITAN_CD							AS SINSEITAN_CD			/*	申請担当者コード */
						, T1.SINSEIRIYU_KB							AS SINSEIRIYU_KB		/*	申請理由区分コード */
						, T1.SYORI_YMD								AS SYORI_YMD			/*	処理日 */
						, T1.ADD_YMD								AS ADD_YMD				/*	登録日 */
						, T1.ADD_TM									AS ADD_TM				/*	登録時間 */
						, T1.ADDTAN_CD								AS ADDTAN_CD			/*	登録担当者コード */
						, T1.UPD_YMD								AS UPD_YMD				/*	更新日 */
						, T1.UPD_TM									AS UPD_TM				/*	更新時間 */
						, T1.UPD_TANCD								AS UPD_TANCD			/*	更新担当者コード */
						, T1.UPD_TANCD								AS KAKUTEITANTOCD		/*	確定担当者コード */
						, M5.HANBAIIN_NM							AS KAKUTEITANTONM		/*	確定担当者名 */
						, T1.SYONIN_FLG								AS SYONINSTATUSKBN		/*	承認状態 */
						, T1.SYORI_TM								AS SYORI_TM				/*	処理時間 */
						, T1.JYURI_NO								AS JYURI_NO				/*	受理番号 */
						, T1.GYOMURINGI_NO							AS GYOMURINGI_NO		/*	業務稟議No */
						, M6.MEISYO_NM								AS MEISYO_NM			/*	申請理由区分名 */
						, 2											AS TBLFLG 				/*	テーブル区分 */
						, T1.SOSINZUMI_FLG							AS SOSINZUMI_FLG		/*	送信済みフラグ */
					FROM
				</parts></statement><statement type="replace" name="TABLE_ID1" /><statement type="final" name="final"><parts>
						LEFT JOIN
								BOMT0030 M1		/*	担当者マスタ */
						ON		M1.HANBAIIN_CD = T1.SINSEITAN_CD
						LEFT JOIN
								MDMT0040 M2		/*	科目マスタ */
						ON		M2.KAMOKU_CD = T1.KAMOKU_CD
						LEFT JOIN
								MDMT0100 M3		/*	名称マスタ */
						ON		M3.SIKIBETSU_CD = 'KHSN'
						AND		M3.MEISYO_CD = T1.SYONIN_FLG
						LEFT JOIN
								BOMT0010 M4		/*	店舗マスタ */
						ON		M4.TENPO_CD = T1.TENPO_CD
						LEFT JOIN
								BOMT0030 M5		/*	担当者マスタ */
						ON		M5.HANBAIIN_CD = T1.UPD_TANCD
						LEFT JOIN
								MDMT0100 M6		/*	名称マスタ */
						ON		M6.SIKIBETSU_CD = 'KHRY'
						AND		M6.MEISYO_CD = T1.SINSEIRIYU_KB
					WHERE 0=0 
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE1" />
			<statement type="replace" name="ADD_ORDER1" />
		</sql>
		/** 経費振替申請一覧 検索(申請、確定テーブル) **/
		<sql id="TF020P01-05">
			<statement type="final" name="final">
				<parts>
					SELECT
						  T1.APPLY_YMD								AS APPLY_YMD		/*	申請日 */
						, 0											AS KAKUTEI_YMD		/*	確定日 */
						, T1.DENPYO_BANGO							AS DENPYO_BANGO		/*	伝票番号 */
						, T1.KAMOKU_CD								AS KAMOKU_CD		/*	科目コード */
						, M2.KAMOKU_NM								AS KAMOKU_NM		/*	科目名 */
						, ( 
							SELECT
								SUM(T1_1.SURYO)
							FROM
								MDAT0021 T1_1
							WHERE
								T1.DENPYO_BANGO = T1_1.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_1.SYORI_YMD 
								AND T1.TENPO_CD = T1_1.TENPO_CD
						)											AS SUURYO 			/*	数量 */
						, ( 
							SELECT
								SUM(T1_2.SURYO * NVL(M1_1.HYOKA_TNK, 0)) 
							FROM
								MDAT0021 T1_2
								INNER JOIN MDMT0130 M1_1
									ON T1_2.JAN_CD = M1_1.JAN_CD 
							WHERE
								T1.DENPYO_BANGO = T1_2.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_2.SYORI_YMD 
								AND T1.TENPO_CD = T1_2.TENPO_CD
						)											AS MONEY			/*	原価金額 */
						, ( 
							SELECT
								SUM(T1_3.SURYO * T1_3.BAIKA_TNK) 
							FROM
								MDAT0021 T1_3
							WHERE
								T1.DENPYO_BANGO = T1_3.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_3.SYORI_YMD 
								AND T1.TENPO_CD = T1_3.TENPO_CD
						)											AS BAIKAMONEY		/*	売価金額 */
						, M1.HANBAIIN_NM							AS HANBAIIN_NM		/*	申請担当者名 */
						, ( 
							SELECT
								M1_2.MEISYO_NM 
							FROM
								MDMT0100 M1_2
							WHERE
								M1_2.SIKIBETSU_CD = 'KHSN'
								AND M1_2.MEISYO_CD = 3
						)											AS SYONINSTATUS		/*	承認種別名 */
						, T1.SINSEIRIYU								AS SINSEIRIYU		/*	申請理由 */
						, ''										AS KYAKKARIYU		/*	却下理由 */
						, T1.SINSEITAN_CD							AS SINSEITAN_CD		/*	申請担当者コード */
						, T1.SINSEIRIYU_KB							AS SINSEIRIYU_KB	/*	申請理由区分コード */
						, T1.SYORI_YMD								AS SYORI_YMD		/*	処理日 */
						, T1.ADD_YMD								AS ADD_YMD			/*	登録日 */
						, T1.ADD_TM 								AS ADD_TM			/*	登録時間 */
						, T1.ADDTAN_CD								AS ADDTAN_CD		/*	登録担当者コード */
						, T1.UPD_YMD								AS UPD_YMD			/*	更新日 */
						, T1.UPD_TM 								AS UPD_TM			/*	更新時間 */
						, T1.UPD_TANCD								AS UPD_TANCD		/*	更新担当者コード */
						, ''										AS KAKUTEITANTOCD	/*	確定担当者コード */
						, ''										AS KAKUTEITANTONM	/*	確定担当者名 */
						, 0											AS SYONINSTATUSKBN	/*	承認状態 */
						, T1.SYORI_TM								AS SYORI_TM			/*	処理時間 */
						, T1.JYURI_NO								AS JYURI_NO			/*	受理番号 */
						, T1.GYOMURINGI_NO							AS GYOMURINGI_NO	/*	業務稟議No */
						, M3.MEISYO_NM								AS MEISYO_NM		/*	申請理由区分名 */
						, 1											AS TBLFLG 			/*	テーブル区分 */
						, 0											AS SOSINZUMI_FLG	/*	送信済みフラグ */
					FROM
				</parts></statement><statement type="replace" name="TABLE_ID1" /><statement type="final" name="final"><parts>
						LEFT JOIN
								BOMT0030 M1		/*	担当者マスタ */
						ON		M1.HANBAIIN_CD = T1.SINSEITAN_CD
						LEFT JOIN
								MDMT0040 M2		/*	科目マスタ */
						ON		M2.KAMOKU_CD = T1.KAMOKU_CD
						LEFT JOIN
								MDMT0100 M3		/*	名称マスタ */
						ON		M3.SIKIBETSU_CD = 'KHRY'
						AND		M3.MEISYO_CD = T1.SINSEIRIYU_KB
					WHERE 0=0 
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE1" />
			<statement type="final" name="final">
				<parts>
					UNION ALL
					SELECT
						  T1.APPLY_YMD								AS APPLY_YMD 			/*	申請日 */
						, T1.UPD_YMD								AS KAKUTEI_YMD 			/*	確定日 */
						, T1.DENPYO_BANGO 							AS DENPYO_BANGO 		/*	伝票番号 */
						, T1.KAMOKU_CD								AS KAMOKU_CD 			/*	科目コード */
						, M2.KAMOKU_NM								AS KAMOKU_NM 			/*	科目名 */
						, ( 
							SELECT
								  SUM(T1_1.SURYO) 
							FROM
								MDAT0031 T1_1
							WHERE
								T1.DENPYO_BANGO = T1_1.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_1.SYORI_YMD 
								AND T1.TENPO_CD = T1_1.TENPO_CD
						)											AS SUURYO				/*	数量 */
						, ( 
							SELECT
								  SUM(T1_2.SURYO * T1_2.GEN_TNK) 
							FROM
								MDAT0031 T1_2
							WHERE
								T1.DENPYO_BANGO = T1_2.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_2.SYORI_YMD 
								AND T1.TENPO_CD = T1_2.TENPO_CD
						)											AS MONEY				/*	原価金額 */
						, ( 
							SELECT
								  SUM(T1_3.SURYO * T1_3.BAIKA_TNK) 
							FROM
								MDAT0031 T1_3
							WHERE
								T1.DENPYO_BANGO = T1_3.DENPYO_BANGO 
								AND T1.SYORI_YMD = T1_3.SYORI_YMD 
								AND T1.TENPO_CD = T1_3.TENPO_CD
						)											AS BAIKAMONEY			/*	売価金額 */
						, M1.HANBAIIN_NM							AS HANBAIIN_NM			/*	申請担当者名 */
						, M3.MEISYO_NM								AS SYONINSTATUS			/*	承認種別名 */
						, T1.SINSEIRIYU								AS SINSEIRIYU			/*	申請理由 */
						, T1.KYAKKARIYU								AS KYAKKARIYU			/*	却下理由 */
						, T1.SINSEITAN_CD							AS SINSEITAN_CD			/*	申請担当者コード */
						, T1.SINSEIRIYU_KB							AS SINSEIRIYU_KB		/*	申請理由区分コード */
						, T1.SYORI_YMD								AS SYORI_YMD			/*	処理日 */
						, T1.ADD_YMD								AS ADD_YMD				/*	登録日 */
						, T1.ADD_TM									AS ADD_TM				/*	登録時間 */
						, T1.ADDTAN_CD								AS ADDTAN_CD			/*	登録担当者コード */
						, T1.UPD_YMD								AS UPD_YMD				/*	更新日 */
						, T1.UPD_TM									AS UPD_TM				/*	更新時間 */
						, T1.UPD_TANCD								AS UPD_TANCD			/*	更新担当者コード */
						, T1.UPD_TANCD								AS KAKUTEITANTOCD		/*	確定担当者コード */
						, M4.HANBAIIN_NM							AS KAKUTEITANTONM		/*	確定担当者名 */
						, T1.SYONIN_FLG								AS SYONINSTATUSKBN		/*	承認状態 */
						, T1.SYORI_TM								AS SYORI_TM				/*	処理時間 */
						, T1.JYURI_NO								AS JYURI_NO				/*	受理番号 */
						, T1.GYOMURINGI_NO							AS GYOMURINGI_NO		/*	業務稟議No */
						, M5.MEISYO_NM								AS MEISYO_NM			/*	申請理由区分名 */
						, 2											AS TBLFLG 				/*	テーブル区分 */
						, T1.SOSINZUMI_FLG							AS SOSINZUMI_FLG		/*	送信済みフラグ */
					FROM
				</parts></statement><statement type="replace" name="TABLE_ID2" /><statement type="final" name="final"><parts>
						LEFT JOIN
								BOMT0030 M1		/*	担当者マスタ */
						ON		M1.HANBAIIN_CD = T1.SINSEITAN_CD
						LEFT JOIN
								MDMT0040 M2		/*	科目マスタ */
						ON		M2.KAMOKU_CD = T1.KAMOKU_CD
						LEFT JOIN
								MDMT0100 M3		/*	名称マスタ */
						ON		M3.SIKIBETSU_CD = 'KHSN'
						AND		M3.MEISYO_CD = T1.SYONIN_FLG
						LEFT JOIN
								BOMT0030 M4		/*	担当者マスタ */
						ON		M4.HANBAIIN_CD = T1.UPD_TANCD
						LEFT JOIN
								MDMT0100 M5		/*	名称マスタ */
						ON		M5.SIKIBETSU_CD = 'KHRY'
						AND		M5.MEISYO_CD = T1.SINSEIRIYU_KB
					WHERE 0=0 
				</parts>
			</statement>
			<statement type="replace" name="ADD_WHERE2" />
			<statement type="replace" name="ADD_ORDER1" />
		</sql>
		/** 経費振替申請 明細 (申請テーブル)**/
		<sql id="TF020P01-06">
			<statement type="final" name="final">
				<parts>
					SELECT	
						  T1.DENPYOGYO_NO							AS DENPYOGYO_NO			/*	伝票行№ */
						, T1.BUMON_CD								AS BUMON_CD				/*	部門コード */
						, M1.BUMONKANA_NM 							AS BUMONKANA_NM			/*	部門カナ名 */
						, M1.BUMON_NM	 							AS BUMON_NM				/*	部門名 */
						, T1.HINSYU_CD								AS HINSYU_CD			/*	品種コード */
						, M2.HINSYU_RYAKU_NM						AS HINSYU_RYAKU_NM		/*	品種略名称 */
						, T1.BURANDO_CD								AS BURANDO_CD			/*	ブランドコード */
						, M3.BURANDO_NMK							AS BURANDO_NMK			/*	ブランド名 */
						, T1.JISYA_HBN								AS JISYA_HBN			/*	自社品番 */
						, T1.MAKER_HBN								AS MAKER_HBN			/*	メーカー品番 */
						, T1.SYONMK									AS SYONMK				/*	商品名(カナ) */
						, T1.IRO_CD									AS IRO_CD				/*	色コード */
						, M4.IRO_NM									AS IRO_NM				/*	色名 */
						, T1.SIZE_CD								AS SIZE_CD				/*	サイズコード */
						, T1.SIZE_NM								AS SIZE_NM				/*	ｻｲｽﾞ */
						, T1.JAN_CD									AS JAN_CD				/*	Janコード */
						, T1.SYOHIN_CD								AS SYOHIN_CD			/*	商品コード */
						, T1.SURYO									AS SURYO				/*	数量 */
						, NVL(M5.HYOKA_TNK,0)						AS GEN_TNK				/*	原単価 */
						, T1.SYORI_TM								AS SYORI_TM				/*	処理時間 */
						, T1.BAIKA_TNK								AS BAIKA_TNK			/*	売価 */
					FROM
						 MDAT0021 T1				/*	経費振替申請TBL(B) */
						LEFT JOIN
								BOMT0060 M1			/*	部門マスタ */
						ON		M1.BUMON_CD = T1.BUMON_CD
						LEFT JOIN
							MDMT0070 M2				/*	品種マスタ */
						ON		M2.BUMON_CD = T1.BUMON_CD
						AND		M2.HINSYU_CD = T1.HINSYU_CD
						LEFT JOIN
							STMT0500 M3				/*	ブランドマスタ */
						ON		M3.BURANDO_CD = T1.BURANDO_CD
						LEFT JOIN
							MDMT0080 M4				/*	色マスタ */
						ON		M4.IRO_CD = T1.IRO_CD
						INNER JOIN
							MDMT0130 M5				/*	発注マスタ */
						ON		M5.JAN_CD = T1.JAN_CD
					WHERE
								T1.TENPO_CD		= </parts><bind id="BIND_TENPO_CD" /><parts>
						AND		T1.SYORI_YMD	= </parts><bind id="BIND_SYORI_YMD" /><parts>
						AND		T1.DENPYO_BANGO	= </parts><bind id="BIND_DENPYO_BANGO" /><parts>
					ORDER	BY	
							T1.DENPYOGYO_NO
				</parts>
			</statement>
		</sql>
		/** 経費振替申請 明細 (確定テーブル)**/
		<sql id="TF020P01-07">
			<statement type="final" name="final">
				<parts>
					SELECT	
						  T1.DENPYOGYO_NO							AS DENPYOGYO_NO		/*	伝票行№ */
						, T1.BUMON_CD								AS BUMON_CD			/*	部門コード */
						, M1.BUMONKANA_NM 							AS BUMONKANA_NM		/*	部門カナ名 */
						, M1.BUMON_NM	 							AS BUMON_NM			/*	部門名 */
						, T1.HINSYU_CD								AS HINSYU_CD		/*	品種コード */
						, M2.HINSYU_RYAKU_NM						AS HINSYU_RYAKU_NM	/*	品種略名称 */
						, T1.BURANDO_CD								AS BURANDO_CD		/*	ブランドコード */
						, M3.BURANDO_NMK							AS BURANDO_NMK		/*	ブランド名 */
						, T1.JISYA_HBN								AS JISYA_HBN		/*	自社品番 */
						, T1.MAKER_HBN								AS MAKER_HBN		/*	メーカー品番 */
						, T1.SYONMK									AS SYONMK			/*	商品名(カナ) */
						, T1.IRO_CD									AS IRO_CD			/*	色コード */
						, M4.IRO_NM									AS IRO_NM			/*	色名 */
						, T1.SIZE_CD								AS SIZE_CD			/*	サイズコード */
						, T1.SIZE_NM								AS SIZE_NM			/*	ｻｲｽﾞ */
						, T1.JAN_CD									AS JAN_CD			/*	Janコード */
						, T1.SYOHIN_CD								AS SYOHIN_CD		/*	商品コード */
						, T1.SURYO									AS SURYO			/*	数量 */
						, T1.GEN_TNK								AS GEN_TNK			/*	原単価 */
						, T1.SYORI_TM								AS SYORI_TM			/*	処理時間 */
						, T1.BAIKA_TNK								AS BAIKA_TNK		/*	売価 */
					FROM
						 MDAT0031 T1			/*	経費振替確定TBL(B) */
						LEFT JOIN
								BOMT0060 M1		/*	部門マスタ */
						ON		M1.BUMON_CD = T1.BUMON_CD
						LEFT JOIN
							MDMT0070 M2			/*	品種マスタ */
						ON		M2.BUMON_CD = T1.BUMON_CD
						AND		M2.HINSYU_CD = T1.HINSYU_CD
						LEFT JOIN
							STMT0500 M3			/*	ブランドマスタ */
						ON		M3.BURANDO_CD = T1.BURANDO_CD
						LEFT JOIN
							MDMT0080 M4			/*	色マスタ */
						ON		M4.IRO_CD = T1.IRO_CD
					WHERE	
								T1.TENPO_CD		= </parts><bind id="BIND_TENPO_CD" /><parts>
						AND		T1.SYORI_YMD		= </parts><bind id="BIND_SYORI_YMD" /><parts>
						AND		T1.DENPYO_BANGO	= </parts><bind id="BIND_DENPYO_BANGO" /><parts>
					ORDER	BY	
							T1.DENPYOGYO_NO
				</parts>
			</statement>
		</sql>
		/** 経費振替申請TBL(H) 削除（「取消」モード）**/
		<sql id="TF020P01-08">
			<statement type="final" name="final">
				<parts>
					DELETE FROM MDAT0020 T1
					WHERE 	T1.TENPO_CD  		= </parts><bind id="BIND_TENPO_CD" /><parts>
					AND		T1.SYORI_YMD		= </parts><bind id="BIND_SYORI_YMD" /><parts>
					AND		T1.DENPYO_BANGO		= </parts><bind id="BIND_DENPYO_BANGO" />
			</statement>
		</sql>
		/** 経費振替申請TBL(B) 削除（「取消」モード）**/
		<sql id="TF020P01-09">
			<statement type="final" name="final">
				<parts>
					DELETE FROM MDAT0021 T1
					WHERE 	T1.TENPO_CD  		= </parts><bind id="BIND_TENPO_CD" /><parts>
					AND		T1.SYORI_YMD		= </parts><bind id="BIND_SYORI_YMD" /><parts>
					AND		T1.DENPYO_BANGO		= </parts><bind id="BIND_DENPYO_BANGO" />
			</statement>
		</sql>
		/** 経費振替申請一時TBL(B) 登録（「新規登録」モード）**/
		<sql id="TF020P01-10">
			<statement type="final" name="final">
				<parts>
					INSERT	INTO 	MDAT0020_TEMP
					(
						 TENPO_CD
						,SYORI_YMD
						,SYORI_TM
						,ADDTAN_CD
						,KAMOKU_CD
						,BUMON_CD
						,HINSYU_CD
						,BURANDO_CD
						,MAKER_HBN
						,SYONMK
						,JISYA_HBN
						,IRO_CD
						,SIZE_CD
						,SIZE_NM
						,JAN_CD
						,SYOHIN_CD
						,SURYO
						,GEN_TNK
						,SINSEIRIYU_KB
						,SINSEIRIYU
					)VALUES
					(
						 </parts><bind id="BIND_TENPO_CD" /><parts>
						,</parts><bind id="BIND_SYORI_YMD" /><parts>
						,</parts><bind id="BIND_SYORI_TM" /><parts>
						,</parts><bind id="BIND_ADDTAN_CD" /><parts>
						,</parts><bind id="BIND_KAMOKU_CD" /><parts>
						,</parts><bind id="BIND_BUMON_CD" /><parts>
						,</parts><bind id="BIND_HINSYU_CD" /><parts>
						,</parts><bind id="BIND_BURANDO_CD" /><parts>
						,</parts><bind id="BIND_MAKER_HBN" /><parts>
						,</parts><bind id="BIND_SYONMK" /><parts>
						,</parts><bind id="BIND_JISYA_HBN" /><parts>
						,</parts><bind id="BIND_IRO_CD" /><parts>
						,</parts><bind id="BIND_SIZE_CD" /><parts>
						,</parts><bind id="BIND_SIZE_NM" /><parts>
						,</parts><bind id="BIND_JAN_CD" /><parts>
						,</parts><bind id="BIND_SYOHIN_CD" /><parts>
						,</parts><bind id="BIND_SURYO" /><parts>
						,</parts><bind id="BIND_GEN_TNK" /><parts>
						,</parts><bind id="BIND_SINSEIRIYU_KB" /><parts>
						,</parts><bind id="BIND_SINSEIRIYU" /><parts>
					)
				</parts>
			</statement>
		</sql>
		/** 経費振替申請TBL(B) 登録（「修正」モード）**/
		<sql id="TF020P01-11">
			<statement type="final" name="final">
				<parts>
					INSERT 	INTO	MDAT0021
					(
						 DENPYO_BANGO
						,SYORI_YMD
						,SYORI_TM
						,TENPO_CD
						,DENPYOGYO_NO
						,BUMON_CD
						,HINSYU_CD
						,BURANDO_CD
						,MAKER_HBN
						,SYONMK
						,JISYA_HBN
						,IRO_CD
						,SIZE_CD
						,SIZE_NM
						,JAN_CD
						,SYOHIN_CD
						,SURYO
						,GEN_TNK
						,BAIKA_TNK
					)VALUES(
						 </parts><bind id="BIND_DENPYO_BANGO" /><parts>
						,</parts><bind id="BIND_SYORI_YMD" /><parts>
						,</parts><bind id="BIND_SYORI_TM" /><parts>
						,</parts><bind id="BIND_TENPO_CD" /><parts>
						,</parts><bind id="BIND_DENPYOGYO_NO" /><parts>
						,</parts><bind id="BIND_BUMON_CD" /><parts>
						,</parts><bind id="BIND_HINSYU_CD" /><parts>
						,</parts><bind id="BIND_BURANDO_CD" /><parts>
						,</parts><bind id="BIND_MAKER_HBN" /><parts>
						,</parts><bind id="BIND_SYONMK" /><parts>
						,</parts><bind id="BIND_JISYA_HBN" /><parts>
						,</parts><bind id="BIND_IRO_CD" /><parts>
						,</parts><bind id="BIND_SIZE_CD" /><parts>
						,</parts><bind id="BIND_SIZE_NM" /><parts>
						,</parts><bind id="BIND_JAN_CD" /><parts>
						,</parts><bind id="BIND_SYOHIN_CD" /><parts>
						,</parts><bind id="BIND_SURYO" /><parts>
						,</parts><bind id="BIND_GEN_TNK" /><parts>
						,</parts><bind id="BIND_BAIKA_TNK" /><parts>
					)
				</parts>
			</statement>
		</sql>
		/** 経費振替申請TBL(H) 更新（「修正」モード）**/
		<sql id="TF020P01-12">
			<statement type="final" name="final">
				<parts>
					UPDATE 	MDAT0020 T1
					SET
						 T1.KAMOKU_CD			=	</parts><bind id="BIND_KAMOKU_CD" /><parts>
						,T1.SINSEIRIYU_KB		=	</parts><bind id="BIND_SINSEIRIYU_KB" /><parts>
						,T1.SINSEIRIYU			=	</parts><bind id="BIND_SINSEIRIYU" /><parts>
						,T1.KESSAI_FLG			=	</parts><bind id="BIND_KESSAI_FLG" /><parts>
						,T1.UPD_YMD				=	</parts><bind id="BIND_UPD_YMD" /><parts>
						,T1.UPD_TM				=	</parts><bind id="BIND_UPD_TM" /><parts>
						,T1.UPD_TANCD			=	</parts><bind id="BIND_UPD_TANCD" /><parts>
						,T1.SAKUJYO_YMD			=	</parts><bind id="BIND_SAKUJYO_YMD" /><parts>
						,T1.SAKUJYO_FLG			=	</parts><bind id="BIND_SAKUJYO_FLG" /><parts>
					WHERE
						T1.TENPO_CD  		= </parts><bind id="BIND_TENPO_CD" /><parts>
					AND	T1.SYORI_YMD		= </parts><bind id="BIND_SYORI_YMD" /><parts>
					AND	T1.DENPYO_BANGO		= </parts><bind id="BIND_DENPYO_BANGO" />
			</statement>
		</sql>
	</sql-list>
</sql-included>
